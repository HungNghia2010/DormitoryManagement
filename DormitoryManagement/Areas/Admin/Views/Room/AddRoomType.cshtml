@{
    ViewData["Title"] = "Thêm Loại Phòng";
}
@model DormitoryManagement.Models.LoaiPhong

@section scripts{

    <script>
        function formatCurrency(number) {
            // Kiểm tra xem giá trị có phải là một số không
            if (isNaN(number)) {
                return "0 ₫";
            }

            // Chuyển số thành chuỗi và chia thành phần nguyên và phần thập phân
            var parts = number.toFixed(0).toString().split(".");
            var integerPart = parts[0];
            var decimalPart = parts.length > 1 ? "." + parts[1] : "";

            // Đảo ngược chuỗi phần nguyên và thêm dấu phân cách hàng nghìn
            var formattedInteger = integerPart.split("").reverse().join("").replace(/(\d{3}(?!$))/g, "$1,").split("").reverse().join("");

            // Kết hợp phần nguyên và phần thập phân vào chuỗi định dạng tiền tệ
            var formattedCurrency = formattedInteger + decimalPart ;

            return formattedCurrency;
        }

        function handleChange(input) {
            // Lấy giá trị từ input và chỉ giữ lại các ký tự số và dấu chấm
            var value = input.value.replace(/[^\d.]/g, '');
            // Chuyển đổi giá trị thành số
            var number = parseFloat(value);
            // Định dạng lại giá trị và hiển thị trong input
            input.value = formatCurrency(number);
        }
    </script>
}

<div id="content-wrapper">
    <div class="container-fluid justify-content-center">
        <div class="row">
            <div class="col-lg-6 offset-lg-3">
                <h2 class="text-center text-gray-800">Thêm Loại Phòng</h2>

                <!-- Form thay đổi mật khẩu -->
                @using (Html.BeginForm("AddRoomType", "Room", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()

                    <div class="form-group">
                        <label for="RoomTypeName">Tên loại phòng:</label>
                        @Html.TextBoxFor(m => m.TenLoaiPhong, new
                        {
                            @class = "form-control",
                            @id = "RoomTypeName",
                            @required = "required"
                        })
                    </div>

                    <div class="form-group">
                        <label for="Price">Giá tiền:</label>
                        @Html.TextBoxFor(m => m.GiaTien, new
                   {
                       @class = "form-control",
                       @id = "Price",
                       @type = "text",
                       @required = "required",
                       @oninput = "handleChange(this)"
                   })
                    </div>

                    <!-- Hiển thị thông báo lỗi nếu có -->
                    if (@ViewBag.Error != null)
                    {
                        <div class="form-group text-center">
                            <span class="alert alert-danger">@ViewBag.Error</span>
                        </div>
                    }

                    <!-- Hiển thị thông báo thành công nếu có -->
                    if (@ViewBag.Success != null)
                    {
                        <div class="form-group text-center">
                            <span class="alert alert-success">@ViewBag.Success</span>
                        </div>
                    }

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">Thêm</button>
                    </div>
                }
            </div>


        </div>
    </div>
</div>